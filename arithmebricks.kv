#:kivy 1.8.0
#: import Animation kivy.animation.Animation


<ArithmeBricksGame>:
    canvas.before:
        Color:
            rgba: 0, 0.1, 0.3, 1
        Rectangle:
            pos: self.pos
            size: self.size
    DigitBrick:
        text: "1"
    DigitBrick:
        text: "2"


<Brick>:
    size: min(self.parent.width, self.parent.height) / 13, min(self.parent.width, self.parent.height) / 10
    x: min(max(self.x, 0), self.parent.width - self.width)
    y: min(max(self.y, 0), self.parent.height - self.height)

    bold: True
    font_size: min(self.parent.width, self.parent.height) / 10

    drag_rectangle: self.x, self.y, self.width, self.height
    drag_timeout: 10000000
    drag_distance: 0

    move_border_color: 1, 0.9, 0.2, 0.5
    attached_border_color: 0, 0.4, 0.7, 0.8
    equal_border_color: 0.1, 0.9, 0.5, 0.8
    final_border_color: 1, 0.9, 0.4, 0.8

    border_color: self.detached_border_color

    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            pos: self.pos
            size: self.size

        Color:
            rgba: self.border_color
        Line:
            points: self.x, self.y, self.x + self.width, self.y, self.x + self.width, self.y + self.height, self.x, self.y + self.height, self.x, self.y
            width: 2

    on_state:
        target_border_color = getattr(self, args[1] + '_border_color')
        Animation(border_color=target_border_color, duration=0.2, t='out_quint').start(self)


<DigitBrick>:
    color: 0.8, 0.4, 0, 1
    background_color: 1, 1, 0, 1
    detached_border_color: 0.3, 0.2, 0.2, 1
